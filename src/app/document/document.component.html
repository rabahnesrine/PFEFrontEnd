<div class="content">

  <div class="container">

    <div class="tab-content mt-3" id="myTabContent">
      <div id="users" class="tab-pane fade in active">
        <div class=" mb-3 float-right">
          <div class="btn-group mr-2">
            <form class="form-inline my-2 my-lg-0 justify-content-center">


                <input placeholder="Search Documents..." type="search" class="form-control " ngModel
                    #searchDocument="ngModel" name="searchDocument"
                    (ngModelChange)="searchDocuments(searchDocument.value)">



              <button type="button" class="btn btn-success" data-toggle="modal" data-target="#addDocModal">
                <i class="fa fa-plus"></i>
                New Document
              </button>

              <div class="btn-group">
                            <button type="button" class="btn btn-success" data-toggle="modal"
                      data-target="#archiveDocModal">
                            <i class="fas fa-archive"></i>  List Archive
                        </button>
                            </div>

              <!--  <div class="btn-group">
                                <button type="button" id="refreshtaskButton"
                                    class="btn btn-danger">
                                    <i *ngIf="refreshTask" class="fa fa-sync fa-spin"></i> <i *ngIf="! refreshTask"
                                        class="fa fa-sync"></i>

                                </button>
                            </div> -->

            </form>


          </div>
        </div>
      </div>
    </div>



    <div class="col-md-12">
      <div class="row">

        <div class="card">
          <div class="card-header card-header-tabs card-header-warning">
            <div class="nav-tabs-navigation">
              <div class="nav-tabs-wrapper">
                <ul class="nav nav-tabs" data-tabs="tabs">

                  <li class="nav-item">
                    <a class="nav-link active  text-success " href="#publicDoc" data-toggle="tab">
                      <i class="material-icons"></i> Public Document
                      <div class="ripple-container"></div>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link  text-success" href="#privateDoc" data-toggle="tab">
                      <i class="material-icons"></i> Private Document
                      <div class="ripple-container"></div>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link  text-success" href="#allPrivateDoc" data-toggle="tab" [hidden]="!isAdmin">
                      <i class="material-icons"></i> All Private Document
                      <div class="ripple-container"></div>
                    </a>
                  </li>
                </ul>

              </div>
            </div>
          </div>
          <div class="card-body">
            <div class="tab-content">









              <div class="tab-pane " id="allPrivateDoc" [hidden]="!isAdmin">
                <div class="mb-3 Card_custom-card--border_5wJKy card">
                  <div class="table-responsive-xl">
                    <table class="mb-0 table table-hover">
                      <thead>
                        <tr>
                          <th class="align-middle bt-0">#</th>
                          <th class="align-middle bt-0">Document Name</th>
                          <th class="align-middle bt-0">Document</th>
                          <th class="align-middle bt-0">Created by</th>

                          <th class="align-middle bt-0 text-right">Actions</th>
                        </tr>
                      </thead>

                      <tbody class="pointer" *ngFor="let doc of documentsPrive; let i=index; ">
                        <tr *ngIf="doc">
                          <td (click)="onSelectDocument(doc)">#{{i+1}} </td>
                          <td (click)="onSelectDocument(doc)"> {{doc.nomDocument}} </td>
                          <td (click)="onSelectDocument(doc)"> {{doc.file}} </td>
                          <td (click)="onSelectDocument(doc)">{{doc.docUser.username}}</td>









                          <td class="align-middle text-right" >


                            <div class="text-right">
    
                              <div class="float-right text-right btn-group btn-group-sm">
                                <a class="table-link  text-warning" (click)="onEditDocument(doc)">
                                  <span class="fa-stack">
                                      <i class="fa fa-square fa-stack-2x"></i>
                                      <i class="fa fa-edit fa-stack-1x fa-inverse"></i>
                                  </span>
                              </a>
                                  <a class="table-link  text-success" (click)="onArchiveDoc(doc)">
                                      <span class="fa-stack">
                                          <i class="fa fa-square fa-stack-2x"></i>
                                          <i class="fa fa-box fa-stack-1x fa-inverse"></i>
                                      </span>
                                  </a>
                                  <a class="table-link  text-info" (click)="downloadFileToSave(doc)" >
                                      <span class="fa-stack">
                                          <i class="fa fa-square fa-stack-2x"></i>
                                          <i class="fa fa-cloud-download-alt fa-stack-1x fa-inverse"></i>
                                      </span>
                                  </a>
                                  <a class="table-link text-danger" (click)="deleteDoc(doc)">
                                      <span class="fa-stack">
                                          <i class="fa fa-square fa-stack-2x"></i>
                                          <i class="fa fa-trash fa-stack-1x fa-inverse"></i>
                                      </span>
                                  </a>
                              </div>
                          </div>
    
                          </td>





                        </tr>

                      </tbody>
                    </table>
                  </div>
                </div>


              </div>






              <div class="tab-pane " id="publicDoc">
                <div class="mb-3 Card_custom-card--border_5wJKy card">
                  <div class="table-responsive-xl">
                    <table class="mb-0 table table-hover">
                      <thead>
                        <tr>
                          <th class="align-middle bt-0">#</th>
                          <th class="align-middle bt-0">Document Name</th>
                          <th class="align-middle bt-0">Document</th>
                          <th class="align-middle bt-0">Created by</th>

                          <th class="align-middle bt-0 text-right">Actions</th>
                        </tr>
                      </thead>

                      <tbody class="pointer" *ngFor="let doc of documents; let i=index; ">
                        <tr *ngIf="doc">
                          <td (click)="onSelectDocument(doc)">#{{i+1}} </td>
                          <td (click)="onSelectDocument(doc)"> {{doc.nomDocument}} </td>
                          <td (click)="onSelectDocument(doc)"> {{doc.file}} </td>
                          <td (click)="onSelectDocument(doc)">{{doc.docUser.username}}</td>


                          <td class="align-middle text-right" >


                            <div class="text-right">
    
                              <div class="float-right text-right btn-group btn-group-sm">
                                <a class="table-link  text-warning" (click)="onEditDocument(doc)">
                                  <span class="fa-stack">
                                      <i class="fa fa-square fa-stack-2x"></i>
                                      <i class="fa fa-edit fa-stack-1x fa-inverse"></i>
                                  </span>
                              </a>
                                  <a class="table-link  text-success" (click)="onArchiveDoc(doc)">
                                      <span class="fa-stack">
                                          <i class="fa fa-square fa-stack-2x"></i>
                                          <i class="fa fa-box fa-stack-1x fa-inverse"></i>
                                      </span>
                                  </a>
                                  <a class="table-link  text-info" (click)="downloadFileToSave(doc)" >
                                      <span class="fa-stack">
                                          <i class="fa fa-square fa-stack-2x"></i>
                                          <i class="fa fa-cloud-download-alt fa-stack-1x fa-inverse"></i>
                                      </span>
                                  </a>
                                  <a class="table-link text-danger" (click)="deleteDoc(doc)">
                                      <span class="fa-stack">
                                          <i class="fa fa-square fa-stack-2x"></i>
                                          <i class="fa fa-trash fa-stack-1x fa-inverse"></i>
                                      </span>
                                  </a>
                              </div>
                          </div>
    
                          </td>




                        </tr>

                      </tbody>
                    </table>
                  </div>
                </div>


              </div>




              <div class="tab-pane " id="privateDoc">
                <div class="mb-3 Card_custom-card--border_5wJKy card">
                  <div class="table-responsive-xl">
                    <table class="mb-0 table table-hover">
                      <thead>
                        <tr>
                          <th class="align-middle bt-0">#</th>
                          <th class="align-middle bt-0">Document Name</th>
                          <th class="align-middle bt-0">Document</th>
                          <th class="align-middle bt-0">Created by</th>


                          <th class="align-middle bt-0 text-right">Actions</th>
                        </tr>
                      </thead>

                      <tbody class="pointer" *ngFor="let doc of docPrivate; let z=index; ">
                        <tr *ngIf="doc">


                        <tr *ngIf="doc">
                          <td (click)="onSelectDocument(doc)">#{{z+1}} </td>
                          <td (click)="onSelectDocument(doc)"> {{doc.nomDocument}} </td>
                          <td (click)="onSelectDocument(doc)"> {{doc.file}} </td>
                          <td (click)="onSelectDocument(doc)">{{doc.docUser.username}}</td>


                          <td class="align-middle text-right" >


                            <div class="text-right">
    
                              <div class="float-right text-right btn-group btn-group-sm">
                                <a class="table-link  text-warning" (click)="onEditDocument(doc)">
                                  <span class="fa-stack">
                                      <i class="fa fa-square fa-stack-2x"></i>
                                      <i class="fa fa-edit fa-stack-1x fa-inverse"></i>
                                  </span>
                              </a>
                                  <a class="table-link  text-success" (click)="onArchiveDoc(doc)">
                                      <span class="fa-stack">
                                          <i class="fa fa-square fa-stack-2x"></i>
                                          <i class="fa fa-box fa-stack-1x fa-inverse"></i>
                                      </span>
                                  </a>
                                  <a class="table-link  text-info" (click)="downloadFileToSave(doc)" >
                                      <span class="fa-stack">
                                          <i class="fa fa-square fa-stack-2x"></i>
                                          <i class="fa fa-cloud-download-alt fa-stack-1x fa-inverse"></i>
                                      </span>
                                  </a>
                                  <a class="table-link text-danger" (click)="deleteDoc(doc)">
                                      <span class="fa-stack">
                                          <i class="fa fa-square fa-stack-2x"></i>
                                          <i class="fa fa-trash fa-stack-1x fa-inverse"></i>
                                      </span>
                                  </a>
                              </div>
                          </div>
    
                          </td>



                        </tr>


                      </tbody>
                    </table>
                  </div>
                </div>


              </div>

              <!--card et card body & ere card -->

            </div>


          </div>


        </div>
      </div>
    </div>


  </div>
</div>


<button [hidden]="true" type="button" id="openDocInfo" data-toggle="modal" data-target="#viewDocModal">
</button>
<button [hidden]="true" type="button" id="openDocEdit" data-toggle="modal" data-target="#editDocModal">
</button>







  <!-- archive list task  -->


  <div class="modal draggable fade bd-example-modal-lg" size="5" id="archiveDocModal" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog	" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <h4 class="modal-title text-center"><i class="fas fa-tasks"> Archived Document</i> </h4>
              <button class="btn-close" type="button" id="openDocInfo" aria-label="Close"
                  data-dismiss="modal"><span aria-hidden="true"></span>
              </button>
          </div>
          <div class="modal-body" [hidden]="isAdmin">
                
            <div class="mb-3 Card_custom-card--border_5wJKy card">
              <div class="table-responsive-xl">
                <table class="mb-0 table table-hover">
                  <thead>
                    <tr>
                      <th class="align-middle bt-0">#</th>
                      <th class="align-middle bt-0">Document Name</th>

                      <th class="align-middle bt-0 text-right">Actions</th>
                    </tr>
                  </thead>

                  <tbody class="pointer" *ngFor="let doc of docArchive; let i=index; ">
                    <tr *ngIf="doc">
                      <td (click)="onSelectDocument(doc)">#{{i+1}} </td>
                      <td (click)="onSelectDocument(doc)"> {{doc.nomDocument}} </td>


                      <td class="align-middle text-right" >





                        <div class="text-right">

                          <div class="float-right text-right btn-group btn-group-sm">
                              <a class="table-link  text-warning" (click)="onSelectDocument(doc)">
                                  <span class="fa-stack">
                                      <i class="fa fa-square fa-stack-2x"></i>
                                      <i class="fa fa-search-plus fa-stack-1x fa-inverse"></i>
                                  </span>
                              </a>
                              <a class="table-link  text-info" (click)="onRestoreDoc(doc)" >
                                  <span class="fa-stack">
                                      <i class="fa fa-square fa-stack-2x"></i>
                                      <i class="fas fa-box-open fa-stack-1x fa-inverse"></i>
                                  </span>
                              </a>
                              <a class="table-link text-danger" (click)="deleteDoc(doc)">
                                  <span class="fa-stack">
                                      <i class="fa fa-square fa-stack-2x"></i>
                                      <i class="fa fa-trash fa-stack-1x fa-inverse"></i>
                                  </span>
                              </a>
                          </div>
                      </div>

                      </td>




                    </tr>

                  </tbody>
                </table>
              </div>
            </div>
          </div>








          <div class="modal-body" [hidden]="!isAdmin">
                
            <div class="mb-3 Card_custom-card--border_5wJKy card">
              <div class="table-responsive-xl">
                <table class="mb-0 table table-hover">
                  <thead>
                    <tr>
                      <th class="align-middle bt-0">#</th>
                      <th class="align-middle bt-0">Document Name</th>

                      <th class="align-middle bt-0 text-right">Actions</th>
                    </tr>
                  </thead>

                  <tbody class="pointer" *ngFor="let doc of docArchiveAll; let i=index; ">
                    <tr *ngIf="doc">
                      <td (click)="onSelectDocument(doc)">#{{i+1}} </td>
                      <td (click)="onSelectDocument(doc)"> {{doc.nomDocument}} </td>


                      <td class="align-middle text-right" >





                        <div class="text-right">

                          <div class="float-right text-right btn-group btn-group-sm">
                              <a class="table-link  text-warning" (click)="onSelectDocument(doc)">
                                  <span class="fa-stack">
                                      <i class="fa fa-square fa-stack-2x"></i>
                                      <i class="fa fa-search-plus fa-stack-1x fa-inverse"></i>
                                  </span>
                              </a>
                              <a class="table-link  text-info" (click)="onRestoreDoc(doc)" >
                                  <span class="fa-stack">
                                      <i class="fa fa-square fa-stack-2x"></i>
                                      <i class="fas fa-box-open fa-stack-1x fa-inverse"></i>
                                  </span>
                              </a>
                              <a class="table-link text-danger" (click)="deleteDoc(doc)">
                                  <span class="fa-stack">
                                      <i class="fa fa-square fa-stack-2x"></i>
                                      <i class="fa fa-trash fa-stack-1x fa-inverse"></i>
                                  </span>
                              </a>
                          </div>
                      </div>

                      </td>




                    </tr>

                  </tbody>
                </table>
              </div>
            </div>



          </div>










          <div class="modal-footer">

              <button type="button" class="btn btn-secondary" data-dismiss="modal"
                  id="new-task-close">Close</button>
             
          </div>
      </div>
  </div>
</div>













  <!-- edit Doc -->

  <div class="modal draggable fade bd-example-modal-lg" id="editDocModal" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog" role="document">
      <div class="modal-content">
          <div class="modal-header">
             
              <h4 class="modal-title text-center"><i class="fas fa-edit"> Edit: {{editDoc.nomDocument}} </i> </h4>

              <button class="btn-close" type="button" id="openProjetInfo" aria-label="Close"
                  data-dismiss="modal"><span aria-hidden="true"></span>
              </button>
          </div>
          <div class="modal-body">
            <div class="card w-100">
              <div class="card-body">
                <h5 class="card-title">
    
    
                  Document
    
                </h5>
                  <form #editDocForm="ngForm">
                    <span class="badge badge-info"> Note </span>If you Check the box, The Document which you want to Edit this will be shared for
                    all User (Public):
                    <fieldset class="form-group">
                      <div class="form-check" >
                          <label class="form-check-label">
                              <input type="checkbox" name="etat" 
                                
                               [(ngModel)]="editDoc.etat" class="form-check-input">
                               <span *ngIf="editDoc.etat==false"> Private</span>
                               <span *ngIf="editDoc.etat==true">Public</span>
                          </label>
                      </div>
                  
                  </fieldset>
                   
                    <div class="form-row">
                      <div class="form-group col-md-6"> Titre du Document :
                        <div class="form-label-group">
                          <input placeholder="Nom du document" [(ngModel)]="editDoc.nomDocument" #nomDocument="ngModel"
                            type="text" name="nomDocument" class="form-control" required>
      
                        </div>
                      </div>
                      <div class="form-group col-md-6"> Type de document :
                        <div class="form-label-group">
                          <input placeholder="Type du document" type="text" name="type" class="form-control"
                            [(ngModel)]="editDoc.typeDocument" #typeDocument="ngModel">
      
                        </div>
                      </div>
                    </div>
      
      
                    <div class="form-group">
                      <div class="form-label-group"> Description :
                        <textarea placeholder="Description" name="description" [(ngModel)]="editDoc.description"
                          #description="ngModel" class="form-control"> </textarea>
      
                      </div>
                    </div>
                   
                      


                  </form>

              </div></div>
          </div>
          <div class="modal-footer">

              <button type="button" class="btn btn-secondary" data-dismiss="modal"
                  id="edit-doc-close">Close</button>
             
              <button  (click)="onUpdateDoc()" type="submit" class="btn-md  btn btn-default"> Save changes
              </button>
          </div>

      </div>
  </div>

</div>







<!-- add  Doc  -->


<div class="modal draggable fade bd-example-modal-lg" size="5" id="addDocModal" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog	" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title text-center"><i class="fas fa-file-import"> New Document</i> </h4>
        <button class="btn-close" type="button" id="openDocInfo" aria-label="Close" data-dismiss="modal"><span
            aria-hidden="true"></span>
        </button>
      </div>
      <div class="modal-body">

        <div class="card w-100">
          <div class="card-body">
            <h5 class="card-title">
              <i class="fas fa-file-alt"></i>



              Document

            </h5>

            <p class="card-text"></p>
            <div class="alert alert-success" *ngIf="submitedFormDoc">
              {{messageFormDOc}}
            </div>

            <form #fo="ngForm" (ngSubmit)="savedocument()">


              <span class="badge badge-info"> Note </span> The Document which you want to Add this will be shared for
              all User (Public):
              <div class="form-check">
                <input class="form-check-input" type="radio" [(ngModel)]="document.etat" #etat="ngModel" required
                  name="etat" id="exampleRadios1" value="true">
                <label class="form-check-label" for="exampleRadios1">
                  Yes
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" [(ngModel)]="document.etat" value="false" #etat="ngModel"
                  required name="etat" id="exampleRadios1">
                <label class="form-check-label" for="exampleRadios1">
                  No
                </label>
              </div>
              <div class="form-row">
                <div class="form-group col-md-6"> Titre du Document :
                  <div class="form-label-group">
                    <input placeholder="Nom du document" [(ngModel)]="document.nomDocument" #nomDocument="ngModel"
                      type="text" name="nomDocument" class="form-control" required>

                  </div>
                </div>
                <div class="form-group col-md-6"> Type de document :
                  <div class="form-label-group">
                    <input placeholder="Type du document" type="text" name="type" class="form-control"
                      [(ngModel)]="document.typeDocument" #typeDocument="ngModel">

                  </div>
                </div>
              </div>


              <div class="form-group">
                <div class="form-label-group"> Description :
                  <textarea placeholder="Description" name="description" [(ngModel)]="document.description"
                    #description="ngModel" class="form-control"> </textarea>

                </div>
              </div>
              <div *ngIf="currentFileUpload" class="progress">
                <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar"
                  attr.aria-valuenow="{{progress.percentage}}" aria-valuemin="0" aria-valuemax="100"
                  [ngStyle]="{width:progress.percentage+'%'}">
                  {{progress.percentage}}%</div>
              </div>

              <div class="form-group" style="text-align:center">
                <label>
                  <input required name="file" [(ngModel)]="document.file" #file="ngModel" class="form-control"
                    type="file" (change)="selectFile($event)">
                </label>
                <button [disabled]="!selectedFiles" class="btn btn-success" (click)="upload()">Upload</button>
              </div>




              <button type="submit" style="display: none;" id="new-doc-save"></button>


            </form>
          </div>
        </div>


      </div>

      <div class="modal-footer">

        <button type="button" class="btn btn-secondary" data-dismiss="modal" id="new-doc-close">Close</button>
        <button [disabled]="!uploadvalid" (click)="saveNewDoc()" type="submit" class="btn-md  btn btn-default"> Save
        </button>


      </div>
    </div>
  </div>
</div>



<!-- detail doc  -->


<div class="modal fade bd-example-modal-lg" id="viewDocModal" tabindex="-1" role="dialog" aria-labelledby=""
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 *ngIf="selectedDoc" class="modal-title text-center" id="exampleModalLongTitle">
          <i class="fas fa-money-check"> Document : {{selectedDoc.nomDocument}} </i>
        </h4>
        <button class="btn-close" type="button" id="openDocInfo" aria-label="Close" data-dismiss="modal"><span
            aria-hidden="true"></span>
        </button>
      </div>
      <div class="modal-body" *ngIf="selectedDoc!==undefined">
        <div>

          <div class="card">
            <div class="card-body">
              <div class="row">
                <div class="col-12 col-sm-auto ">
                  <div class="mx-auto" style="width: 120px;">
                    <div class="d-flex justify-content-center align-items-center rounded">
                      <img class="rounded" height="120" width="120" src="{{selectedDoc.docUser.profileImageUrl}}"
                        alt="{{selectedDoc.docUser.username}}">

                    </div>
                  </div>
                </div>
                <div class="col d-flex flex-column flex-sm-row justify-content-between ">
                  <div class="text-left text-sm-left  mb-sm-0">

                    <h5 class="pt-sm-2 pb-1 mb-0 text-nowrap"><i class="fas fa-user-shield">
                        Created
                        by:
                        {{selectedDoc.docUser.username}}</i>
                    </h5>

                    <div class="">
                      <i class="fa fa-shield-alt float-right">{{selectedDoc.docUser.role.substring(5)}}</i>

                    </div>


                    <div class="text-muted"><small>
                        <div class=""> Contact: </div>
                        {{selectedDoc.docUser.email}}
                      </small></div>


                  </div>

                  <div class="text-center text-sm-right">

                    <div *ngIf="selectedDoc.dateCreation" class="text-muted">
                      <small> Creation Date :
                      </small>
                    </div>
                    <div *ngIf="selectedDoc.dateCreation" class="text-muted">
                      <small>
                        {{selectedDoc.dateCreation | date:'medium'
                        }}</small>
                    </div>



                  </div>

                </div>
              </div>
            </div>

            <ul class="list-group list-group-flush">

              <li class="list-group-item">
                <i class="fas fa-file-signature"> Document Name :
                  {{selectedDoc.nomDocument}}</i>
              </li>
              <li class="list-group-item" *ngIf="selectedDoc.typeDocument">
                <i class="fas fa-file-signature"> Document Type :
                  {{selectedDoc.typeDocument}}</i>
              </li>
              <li class="list-group-item" *ngIf="selectedDoc.description">
                <i class="fas fa-file-signature"> description :
                  {{selectedDoc.description}}</i>
              </li>

             

              <li class="list-group-item">
                <span *ngIf="!selectedDoc.etat"> 
                    <i class="fas fa-info-circle float-right" style="color : red;"></i><Strong>Status : Private</Strong> 
                </span>

                <span *ngIf="selectedDoc.etat">
                    <i class="fas fa-info-circle float-right" style="color : green;"></i><Strong>Status : Public</Strong> 
                </span>
            </li>


            </ul>
          </div>


        </div>
        <div class="modal-footer">

          <button type="button" class="btn btn-secondary" data-dismiss="modal" id="new-projet-close">Close</button>
        </div>
      </div>


    </div>


  </div>


</div>